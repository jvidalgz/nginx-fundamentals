events {}

http {
  types {
  text/html html;
    text/css css;
  }
  server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
  
    # prefix match
    # location /greet {
    #   return 200 'Hello from NGINX "/greet" location';
    # }

    # exact match
    # location = /greet {
    #   return 200 'Hello from NGINX "/greet" location - EXACT MATCH';
    # }

    # regex match - case sensitive
    #  location ~ /greet[0-9] {
    #    return 200 'Hello from NGINX "/greet" location - REGEX MATCH';
    #  }

     # regex match - case insensitive
    # location ~* /greet[0-9] {
    #   return 200 'Hello from NGINX "/greet" location - REGEX MATCH INSENSITIVE';
    # }

    # preferential prefix match (more important than a regex)
    # location ^~ /greet0 {
    #   return 200 'Hello from NGINX "/greet" location - PREFERENTIAL MATCH';
    # }

    # embedded variables
    # location /inspect {
    #   return 200 "$host\n$uri\n$args";
    # }

    # check static API key
    # if ($arg_apikey != 1234){
    #   return 401 "Incorrect API key";
    # } 

    # /greet is re-evaluate again as a complete new request
    rewrite ^/user/\w+ /greet;

    location /greet {
      return 200 "Hello user";
    } 
  }
}
